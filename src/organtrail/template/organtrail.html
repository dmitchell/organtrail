<!-- Base file for project -->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Organ Trail</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="../static/js/underscore-min.js"></script>
	<script type="text/javascript" src="../static/js/backbone-min.js"></script>
	<script type="text/javascript" src="../static/js/recipient.js"></script>
	<script type="text/javascript" src="../static/js/doctors.js"></script>

    <!-- Bootstrap -->
    <link href="../static/css/bootstrap.css" rel="stylesheet" media="screen">
    <script src="../static/js/bootstrap.js"></script>
    <script type="text/javascript">
    $(window).load(function(){
        $('#introModal').modal('show');
    });
    $(window).load(function(){
        $('#characterModal').modal('show');
    });
    $(document).ready(function(){
    	window.recipients = new Recipients([{
    		id : 1,
    		name : "John Doe",
    		lifeExpenctancy : 30,
    		description : "John has had 2 coronary bypassess and now needs a new heart.<br/>" +
				"<p>He's active in several non-profits... He has 12 grandchildren: 3 of whom live with him...</p>",
			age : 78,
			rejectionProbability : 0.2,
			doctor : null,
			money : 1000
    	},
    	{
    		id : 2,
    		name : "Cindy McArthur",
    		lifeExpenctancy : 30,
    		description : "Cindy's heart failed due to a severe illness.<br/>" +
				"<p>Cindy has 2 young children...</p>",
			age : 23,
			rejectionProbability : 0.1,
			doctor : null,
			money: 1000
    	}]);
    	window.recipientTable = new RecipientCollectionView({
    		el : $("#patient-list"),
    		collection : window.recipients
    	});
    	window.recipientTable.render();
    	window.currentPlayer = 2; // which id from the recipient table is this player?
    	$("#player-name").html(window.recipients.get(window.currentPlayer).get("name"));
		$("#player-doctor").html(window.recipients.get(window.currentPlayer).get("doctor"));
		$("#player-money").html(window.recipients.get(window.currentPlayer).get("money"));
    
    // Doctor render for doctor selection modal.
    	window.doctors = new Doctors([{
    		id : 1,
    		name : "Gregory House",
    		waitTime : 7,
    		description : "The best doctor available. Extremely busy and expensive.",
			rating : 80,
			cost : 500,
    	},
    	{
    		id : 2,
    		name : "Nick Riviera",
    		waitTime : 1,
    		description : "Well... He's *technically* a doctor...",
			rating : 20,
			cost : 100,
    	}]);
    	window.doctorTable = new DoctorCollectionView({
    		el : $("#doctor-list"),
    		collection : window.doctors
    	});
    	window.doctorTable.render();
    });
</script>
</head>

<body>

<!-- Instructions Modal -->
<!-- 
<div class="modal hide fade" id="introModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Welcome to Organ Trail</h3>
  </div>
  <div class="modal-body">
    <p>You are a patient on the waiting list for an organ transplant. There are only two things you can try to influence: you can look for ways to bump your position up on the list, or you can try and increase the existing donor pool so more organs are available for donation. Any actions you take, however, will cost you resources such as time and money - none of which you have much of. Will you be able to receive an organ before your own countdown timer expires?</p>
    
    <p>Organ Trail is designed to convey the anxieties of being an organ recipient, as well as the complexity of the organ donation system: specifically, how the whole system is built on a system of fragile public trust, and how events in the world can sway public opinion in life-changing ways for many people.</p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Get Started</a>
  </div>
</div>
 -->
 
 <!-- Character Modal -->
 <div class="modal hide fade" id="characterModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Select a doctor</h3>
  </div>
  <div class="modal-body">
    <p>Some doctors might be able to push your treatment faster, but they will also have longer waiting times and be more expensive. You can switch doctors later, but you will have to wait a few days until they can see you.</p>
    
    <div id="doctor-list">
  	</div>
</div>
</div>

<!-- Main Interface -->

	<div class="container">
		<div class="row">
			<div class="span12">
				<h3 class="pull-left">Organ Trail</h3>
				<h4 class="pull-right"><a href="#introModal" data-toggle="modal">About</a></h4>
			</div>
		</div>
		
		<div class="row">
			<div class="span12">
				<table class="table">
					<tr>
						<td id="player-name">&nbsp</td>
						<td id="player-doctor">&nbsp</td>
						<td>Disease Condition</td>
						<td id="player-money">&nbsp</td>
					</tr>
				</table>
				<hr>
			</div>
		</div>
		
		<div class="row">
		<!--
    	<div class="span1"> <!-- Left Sidebar --><!--
    		<p>Hello World</p>
    	</div>
		-->
    	
    	<div class="span8"> <!-- Main Content Area -->
    		<div class="row">
    			<div class="span8"> <!-- Recipient List -->
    				<h4>Patient List</h4>
    				<table class="table table-striped table-bordered table-hover table-condensed patient-list">
    					<thead><tr>
    						<th>Pos</th>
    						<th>Name</th>
    						<th>TTL</th>
    					</tr></thead>
    					<tbody id="patient-list">
    					</tbody>
    				</table>
    			</div>
    		</div>
    		<div class="row">
    			<div class="span6 offset2">
    				<h3>What do you want to do next?</h3>
    				
    			</div>
    		</div>
    	</div>
    	
    	<div class="span4"> <!-- Right Sidebar -->
    		<div class="row">
    			<div class="span3"> <!-- Calendar -->
    				<h4>Life Expectancy</h4>
    				<table class="table table-bordered table-condensed">
    					<tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td></tr>
    					<tr><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td></tr>
    					<tr><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td></tr>
    					<tr><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td></tr>
    					<tr><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td></tr>
    					<tr><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td></tr>
    				</table>
    			</div>
    		</div>
    		<div class="row">
    			<div class="span3"> <!-- Donor Pool -->
    				<h4>Donor Pool</h4>
    				<div class="progress progress-striped active">
  						<div class="bar" style="width: 20%;">20%</div>
					</div>
				</div>
			</div>
    	</div>
    	</div>
    </div>
</body>
</html>